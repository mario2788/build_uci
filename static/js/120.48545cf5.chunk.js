"use strict";(self.webpackChunkcoc_ui=self.webpackChunkcoc_ui||[]).push([[120],{5868:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(4165),a=n(5861),o=n(2982),i=n(885),c=n(2791),s=n(4554),l=n(1889),u=n(9373),d=n(3191),f=n(8130),p=n(5910),m=n(3812),h=n(4529),x=n(7191),g=n(8515),b=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=(0,a.Z)((0,r.Z)().mark((function e(t){var a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],o=t.map(n),e.prev=2,e.next=5,Promise.all(o);case 5:a=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return");case 12:return e.abrupt("return",a[0].result);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)},o=function(e){return i.apply(this,arguments)},n=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){return t(r)},r.onerror=function(e){return n(e)},r.readAsDataURL(e)}))},e.abrupt("return",o(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=n(6320),Z=function(e,t){for(var n=0,r=["Nombres y apellidos","Cuenta corriente","Sexo","Fecha de nacimiento","Estado de bienestar (0-3)","Ala","Sala","Cama"];n<r.length;n++){var a=r[n];if(!t[a]&""!==t[a])return e("El valor: ".concat(a," es necesario.")),!1}return!0},j=n(623),y=n(184),S=function(){var e=x.b0.urlServer,t=x.b0.requestOptionsPost,n=x.b0.requestOptionsGet,S=JSON.parse(localStorage.getItem("patients")),w=JSON.parse(localStorage.getItem("units")),C=(0,c.useState)(""),k=(0,i.Z)(C,2),I=k[0],O=k[1],P=(0,c.useState)(""),F=(0,i.Z)(P,2),N=F[0],z=F[1],D=(0,c.useState)(w[0].ala),T=(0,i.Z)(D,2),E=T[0],J=T[1],A=(0,c.useState)(w.filter((function(e){return e.ala===E}))[0].salas[0].sala),L=(0,i.Z)(A,2),R=L[0],B=L[1],H=(0,c.useCallback)((function(e){var t=S.filter((function(e){return e.ala===E})).map((function(e){return parseInt(e.cama)})),n=w.filter((function(e){return e.ala===E}))[0].salas[0].capacidad,r=(0,o.Z)(Array(parseInt(n))).reduce((function(e,n,r){return t.findIndex((function(e){return e===r}))<0&&e.push(r),e}),[]);return console.log(e,r[0]),{cama:e||r[0],camas:r,ocupadas:t}}),[E]),M=(0,c.useState)(H(null)),_=(0,i.Z)(M,2),W=_[0],q=_[1];(0,c.useEffect)((function(){B(w.filter((function(e){return e.ala===E}))[0].salas[0].sala),q(H())}),[E,H]),(0,c.useEffect)((function(){localStorage.getItem("Data")||(localStorage.setItem("Data",JSON.stringify({Foto:j.T})),console.log("Objeto creado"))}),[]);var G=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files){e.next=2;break}return e.abrupt("return");case 2:return n=JSON.parse(localStorage.getItem("Data")),e.next=6,b((0,o.Z)(t.target.files));case 6:a=e.sent,n.Foto=a.split(",")[1],localStorage.setItem("Data",JSON.stringify(n)),O(t.target.files[0].name);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var o=(0,a.Z)((0,r.Z)().mark((function a(){var o,i;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(z(""),(o=JSON.parse(localStorage.getItem("Data"))).Edad=o["Fecha de nacimiento"],!Z(z,o)){r.next=11;break}return r.next=6,fetch("".concat(e,"Patient/?identifier=").concat(o["Cuenta corriente"]),(0,g.Z)(n));case 6:return i=r.sent,r.next=9,i.json();case 9:0===(i=r.sent).total?(t.body=JSON.stringify((0,v.K)(o,!0)),fetch("".concat(e,"Patient"),(0,g.Z)(t,"application/json")).then((function(e){console.log(e),"Created"===e.statusText?z("Paciente creado"):"Payload Too Large"===e.statusText?z("La imagen es muy grande."):z(e.statusText),e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("Error en la creacion del paciente",e)}))):z("La cuenta corriente ya existe");case 11:case 12:case"end":return r.stop()}}),a)})));return function(){return o.apply(this,arguments)}}();return(0,y.jsxs)(s.Z,{style:{fontFamily:"Montserrat"},children:[(0,y.jsx)("div",{style:{background:"#0d47a1",marginBottom:"0.5rem"},children:(0,y.jsx)(d.D,{color:"white",children:"Crear paciente"})}),(0,y.jsxs)("div",{style:{background:"white",padding:"0.5rem",paddingBottom:"2rem"},children:[(0,y.jsx)(p.D,{children:"Informaci\xf3n b\xe1sica del paciente:"}),(0,y.jsxs)(l.ZP,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",mt:2,children:[(0,y.jsxs)(l.ZP,{item:!0,xs:6,children:[(0,y.jsx)(m.o,{field:"Nombres y apellidos",width:50}),(0,y.jsx)(m.o,{field:"Cuenta corriente",width:50}),(0,y.jsx)(m.o,{field:"Sexo",width:30}),(0,y.jsx)(m.o,{field:"Fecha de nacimiento",type:"date",width:50,style:{width:"267px"}}),(0,y.jsxs)(u.Z,{variant:"outlined",component:"label",style:{marginRight:"0.5rem",border:"2px solid #c4c4c4"},children:[(0,y.jsx)(f.x,{bold:"600",children:"Cargar foto"}),(0,y.jsx)("input",{id:"foto",hidden:!0,type:"file",accept:"image/*",onChange:function(e){return G(e)}})]}),(0,y.jsx)("label",{children:I})]}),(0,y.jsxs)(l.ZP,{item:!0,xs:6,children:[(0,y.jsx)(m.o,{field:"Estado de bienestar (0-3)",width:50}),[["Ala",w.map((function(e){return e.ala})),function(e){return J(e)},{Ala:E}],["Sala",[R],function(e){return B(w.filter((function(e){return e.ala===E}))[0].salas[0].sala)},{Sala:R}],["Cama",W.camas,function(e){return q(H(e))},{Cama:W.cama}]].map((function(e,t){return(0,y.jsx)(h.z,{field:e[0],opt:e[1],blur:function(t){return e[2](t.target.innerText)},dataOut:e[3],width:30},t)}))]})]}),(0,y.jsxs)("div",{style:{marginTop:"1rem",textAlign:"center"},children:[(0,y.jsx)("hr",{width:"100%",align:"center",size:"4",noshade:"noshade",color:"#c4c4c4"}),(0,y.jsx)("br",{}),(0,y.jsx)(u.Z,{variant:"contained",component:"label",style:{marginRight:"0.5rem",fontWeight:"600"},onClick:function(){return K()},children:(0,y.jsx)(f.x,{bold:"600",children:"Crear"})}),(0,y.jsx)("label",{children:N})]})]})]})}},8130:function(e,t,n){n.d(t,{x:function(){return s}});var r=n(1413),a=(n(2791),n(4919)),o=n(2541),i=n(3457),c=n(184),s=function(e){var t=(0,a.z)(),n=t._xl,s=t._lg,l=o.bG,u=(0,i.Z)("span")({fontWeight:e.bold?e.bold:"500",fontFamily:"Montserrat !important",paddingRight:"0rem !important",paddingLeft:"0rem !important",marginTop:"0 !important",marginBottom:"0 !important"}),d=(0,i.Z)("p")({fontWeight:e.bold?e.bold:"500",fontFamily:"Montserrat !important",paddingRight:"0rem !important",paddingLeft:"0rem !important"});return e.element?(0,c.jsx)(d,{style:{color:"blue"===e.color?l.color1.main:e.color,fontSize:n?"22px":s?"16px":"12px",lineHeight:n?"1.3rem":s?"1.1rem":"0.8rem",marginBlock:n||s?"0.2rem":"0.1rem"},children:e.children}):(0,c.jsx)(u,{style:(0,r.Z)((0,r.Z)({},e.style),{},{color:"blue"===e.color?l.color1.main:e.color,fontSize:n?"22px":s?"16px":"12px",lineHeight:n?"1.5rem":s?"1.1rem":"0.8rem !important"}),children:e.children})}},7961:function(e,t,n){var r=n(4836);t.Z=void 0;var a=r(n(5649)),o=n(184),i=(0,a.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}),"Help");t.Z=i}}]);
//# sourceMappingURL=120.48545cf5.chunk.js.map